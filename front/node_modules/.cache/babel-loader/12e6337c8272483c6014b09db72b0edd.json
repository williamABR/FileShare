{"ast":null,"code":"import { uuid } from \"vue-uuid\"; // Import uuid\n\nimport { crono } from \"vue-crono\";\nimport axios from \"axios\"; //const form = document.querySelector(\"form\");\n\nexport default {\n  mixins: [crono],\n  name: \"HelloWorld\",\n\n  data() {\n    return {\n      posts: null,\n      files: [],\n      subs: [],\n      actualizar: 0\n    };\n  },\n\n  props: {\n    msg: String\n  },\n  methods: {\n    async subscribir() {\n      const selectAux = document.getElementById(\"selectChannel1\");\n      const headers = {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      };\n      var obj = {\n        \"idUser\": this.getCookie(\"userId\"),\n        \"channel\": selectAux.value\n      };\n      this.posts = await axios.post(\"http://localhost:8080/subscription\", obj, {\n        headers\n      }).then(response => {\n        console.log(response);\n      }).catch(error => {\n        this.errorMessage = error.message;\n        console.error(\"There was an error!\", error);\n      });\n    },\n\n    async prueba() {\n      const formData = new FormData(document.getElementById(\"formSend\"));\n      formData.append(\"idUser\", this.getCookie(\"userId\"));\n      const headers = {\n        \"Content-Type\": \"multipart/form-data\"\n      };\n      this.posts = await axios.post(\"http://localhost:8080/upload\", formData, {\n        headers\n      }).then(response => {\n        var e = document.getElementById(\"selectChannel\");\n        var value = e.value;\n        var objectFile = {\n          canal: value,\n          fileName: response.data\n        };\n        this.files.push(objectFile);\n        this.actualizar += 1;\n        console.log(this.files);\n      }).catch(error => {\n        this.errorMessage = error.message;\n        console.error(\"There was an error!\", error);\n      });\n    },\n\n    setCookie(cname, cvalue, exdays) {\n      const d = new Date();\n      d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);\n      let expires = \"expires=\" + d.toUTCString();\n      document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n    },\n\n    getCookie(cname) {\n      let name = cname + \"=\";\n      let decodedCookie = decodeURIComponent(document.cookie);\n      let ca = decodedCookie.split(\";\");\n\n      for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n\n        while (c.charAt(0) == \" \") {\n          c = c.substring(1);\n        }\n\n        if (c.indexOf(name) == 0) {\n          return c.substring(name.length, c.length);\n        }\n      }\n\n      return \"\";\n    },\n\n    checkCookie(cname) {\n      let user = this.getCookie(cname);\n\n      if (user != \"\") {\n        return true;\n      } else {\n        //return false;\n        this.setCookie(\"userId\", uuid.v1(), 30);\n        return true;\n      }\n    },\n\n    async checkFiles() {\n      var sizeFile = true;\n\n      if (this.files.length === 0) {\n        sizeFile = true;\n      } else {\n        sizeFile = false;\n      }\n\n      await axios.post('http://localhost:8080/checkUpdate/' + this.getCookie(\"userId\"), sizeFile).then(response => {\n        console.log(response);\n      }).catch(error => {\n        this.errorMessage = error.message;\n        console.error(\"There was an error!\", error);\n      });\n    }\n\n  },\n  cron: {\n    time: 10000,\n    method: \"checkFiles\"\n  }\n};","map":{"version":3,"mappings":"AA2FA,SAASA,IAAT,QAAqB,UAArB,C,CAAiC;;AACjC,SAASC,KAAT,QAAsB,WAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CAEA;;AAEA,eAAe;EACbC,MAAM,EAAE,CAACF,KAAD,CADK;EAEbG,IAAI,EAAE,YAFO;;EAGbC,IAAI,GAAG;IACL,OAAO;MACLC,KAAK,EAAE,IADF;MAELC,KAAK,EAAE,EAFF;MAGLC,IAAI,EAAE,EAHD;MAILC,UAAU,EAAE;IAJP,CAAP;EAMD,CAVY;;EAWbC,KAAK,EAAE;IACLC,GAAG,EAAEC;EADA,CAXM;EAcbC,OAAO,EAAE;IACP,MAAMC,UAAN,GAAmB;MACjB,MAAMC,SAAQ,GAAIC,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,CAAlB;MACA,MAAMC,OAAM,GAAI;QAAE,gBAAgB;MAAlB,CAAhB;MACA,IAAIC,GAAE,GAAI;QAAC,UAAS,KAAKC,SAAL,CAAe,QAAf,CAAV;QAAmC,WAAUL,SAAS,CAACM;MAAvD,CAAV;MACA,KAAKf,KAAL,GAAa,MAAMJ,KAAI,CACpBoB,IADgB,CACX,oCADW,EAC2BH,GAD3B,EACgC;QAACD;MAAD,CADhC,EAEhBK,IAFgB,CAEVC,QAAD,IAAc;QAClBC,OAAO,CAACC,GAAR,CAAYF,QAAZ;MACD,CAJgB,EAKhBG,KALgB,CAKTC,KAAD,IAAW;QAChB,KAAKC,YAAL,GAAoBD,KAAK,CAACE,OAA1B;QACAL,OAAO,CAACG,KAAR,CAAc,qBAAd,EAAqCA,KAArC;MACD,CARgB,CAAnB;IASD,CAdM;;IAeP,MAAMG,MAAN,GAAe;MACb,MAAMC,QAAO,GAAI,IAAIC,QAAJ,CAAajB,QAAQ,CAACC,cAAT,CAAwB,UAAxB,CAAb,CAAjB;MACAe,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0B,KAAKd,SAAL,CAAe,QAAf,CAA1B;MACA,MAAMF,OAAM,GAAI;QAAE,gBAAgB;MAAlB,CAAhB;MACA,KAAKZ,KAAL,GAAa,MAAMJ,KAAI,CACpBoB,IADgB,CACX,8BADW,EACqBU,QADrB,EAC+B;QAAEd;MAAF,CAD/B,EAEhBK,IAFgB,CAEVC,QAAD,IAAc;QAClB,IAAIW,IAAInB,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAAR;QACA,IAAII,KAAI,GAAIc,CAAC,CAACd,KAAd;QAEA,IAAIe,UAAS,GAAI;UACfC,KAAK,EAAEhB,KADQ;UAEfiB,QAAQ,EAAEd,QAAQ,CAACnB;QAFJ,CAAjB;QAIA,KAAKE,KAAL,CAAWgC,IAAX,CAAgBH,UAAhB;QACA,KAAK3B,UAAL,IAAmB,CAAnB;QACAgB,OAAO,CAACC,GAAR,CAAY,KAAKnB,KAAjB;MACD,CAbgB,EAchBoB,KAdgB,CAcTC,KAAD,IAAW;QAChB,KAAKC,YAAL,GAAoBD,KAAK,CAACE,OAA1B;QACAL,OAAO,CAACG,KAAR,CAAc,qBAAd,EAAqCA,KAArC;MACD,CAjBgB,CAAnB;IAkBD,CArCM;;IAsCPY,SAAS,CAACC,KAAD,EAAQC,MAAR,EAAgBC,MAAhB,EAAwB;MAC/B,MAAMC,IAAI,IAAIC,IAAJ,EAAV;MACAD,CAAC,CAACE,OAAF,CAAUF,CAAC,CAACG,OAAF,KAAcJ,MAAK,GAAI,EAAT,GAAc,EAAd,GAAmB,EAAnB,GAAwB,IAAhD;MACA,IAAIK,OAAM,GAAI,aAAaJ,CAAC,CAACK,WAAF,EAA3B;MACAjC,QAAQ,CAACkC,MAAT,GAAkBT,KAAI,GAAI,GAAR,GAAcC,MAAd,GAAuB,GAAvB,GAA6BM,OAA7B,GAAuC,SAAzD;IACD,CA3CM;;IA4CP5B,SAAS,CAACqB,KAAD,EAAQ;MACf,IAAIrC,IAAG,GAAIqC,KAAI,GAAI,GAAnB;MACA,IAAIU,aAAY,GAAIC,kBAAkB,CAACpC,QAAQ,CAACkC,MAAV,CAAtC;MACA,IAAIG,EAAC,GAAIF,aAAa,CAACG,KAAd,CAAoB,GAApB,CAAT;;MACA,KAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,EAAE,CAACG,MAAvB,EAA+BD,CAAC,EAAhC,EAAoC;QAClC,IAAIE,IAAIJ,EAAE,CAACE,CAAD,CAAV;;QACA,OAAOE,CAAC,CAACC,MAAF,CAAS,CAAT,KAAe,GAAtB,EAA2B;UACzBD,IAAIA,CAAC,CAACE,SAAF,CAAY,CAAZ,CAAJ;QACF;;QACA,IAAIF,CAAC,CAACG,OAAF,CAAUxD,IAAV,KAAmB,CAAvB,EAA0B;UACxB,OAAOqD,CAAC,CAACE,SAAF,CAAYvD,IAAI,CAACoD,MAAjB,EAAyBC,CAAC,CAACD,MAA3B,CAAP;QACF;MACF;;MACA,OAAO,EAAP;IACD,CA1DM;;IA4DPK,WAAW,CAACpB,KAAD,EAAQ;MACjB,IAAIqB,IAAG,GAAI,KAAK1C,SAAL,CAAeqB,KAAf,CAAX;;MACA,IAAIqB,IAAG,IAAK,EAAZ,EAAgB;QACd,OAAO,IAAP;MACF,CAFA,MAEO;QACL;QACA,KAAKtB,SAAL,CAAe,QAAf,EAAyBxC,IAAI,CAAC+D,EAAL,EAAzB,EAAoC,EAApC;QACA,OAAO,IAAP;MACF;IACD,CArEM;;IAsEP,MAAMC,UAAN,GAAmB;MACjB,IAAIC,QAAO,GAAI,IAAf;;MACA,IAAI,KAAK1D,KAAL,CAAWiD,MAAX,KAAsB,CAA1B,EAA6B;QAC3BS,QAAO,GAAI,IAAX;MACD,CAFD,MAEK;QACHA,QAAO,GAAI,KAAX;MACF;;MACA,MAAM/D,KAAI,CACPoB,IADG,CACE,uCAAqC,KAAKF,SAAL,CAAe,QAAf,CADvC,EACiE6C,QADjE,EAEH1C,IAFG,CAEGC,QAAD,IAAc;QAClBC,OAAO,CAACC,GAAR,CAAYF,QAAZ;MACD,CAJG,EAKHG,KALG,CAKIC,KAAD,IAAW;QAChB,KAAKC,YAAL,GAAoBD,KAAK,CAACE,OAA1B;QACAL,OAAO,CAACG,KAAR,CAAc,qBAAd,EAAqCA,KAArC;MACD,CARG,CAAN;IASD;;EAtFM,CAdI;EAsGbsC,IAAI,EAAE;IACJC,IAAI,EAAE,KADF;IAEJC,MAAM,EAAE;EAFJ;AAtGO,CAAf","names":["uuid","crono","axios","mixins","name","data","posts","files","subs","actualizar","props","msg","String","methods","subscribir","selectAux","document","getElementById","headers","obj","getCookie","value","post","then","response","console","log","catch","error","errorMessage","message","prueba","formData","FormData","append","e","objectFile","canal","fileName","push","setCookie","cname","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","cookie","decodedCookie","decodeURIComponent","ca","split","i","length","c","charAt","substring","indexOf","checkCookie","user","v1","checkFiles","sizeFile","cron","time","method"],"sourceRoot":"","sources":["/Users/williambaquero/Documents/Go/Front/front/src/components/HelloWorld.vue"],"sourcesContent":["<template>\n  <h1>\n    {{\n      checkCookie(\"userId\")\n        ? \"Bienvenido, Ya puedes compartir archivos\"\n        : \"Usuario no registrado\"\n    }}\n  </h1>\n  <h1>Hola, {{ getCookie(\"userId\") }}</h1>\n  <div class=\"container\" id=\"app\">\n    <div class=\"subContainer\">\n      <form\n        enctype=\"multipart/form-data\"\n        @submit.prevent=\"prueba($event)\"\n        name=\"formSend\"\n        id=\"formSend\"\n      >\n        <h1>Compartir Archivo</h1>\n        <div class=\"form-group\">\n          <label for=\"exampleFormControlFile1\">Seleccionar un archivo:</label>\n          <br />\n          <input\n            type=\"file\"\n            class=\"form-control-file\"\n            id=\"exampleFormControlFile1\"\n            name=\"myFile\"\n          />\n          <div class=\"channels input-group\">\n            <div class=\"input-group-prepend mx-2\">\n              <label class=\"input-group-text\" for=\"inputGroupSelect01\"\n                >Canal:\n              </label>\n            </div>\n            <select\n              class=\"form-select\"\n              aria-label=\"Default select example\"\n              name=\"channel\"\n              id=\"selectChannel\"\n            >\n              <option value=\"channel1\" selected>Channel 1</option>\n              <option value=\"channel2\">Channel 2</option>\n              <option value=\"channel3\">Channel 3</option>\n            </select>\n          </div>\n          <input type=\"submit\" value=\"Compartir Archivo\" class=\"btnUpload\" />\n        </div>\n      </form>\n      <!--Subscription-->\n      <form @submit.prevent=\"subscribir($event)\" name=\"formSub\" id=\"formSub\">\n        <h1>Subscribir a Canal</h1>\n        <div class=\"form-group\">\n          <div class=\"channels input-group\">\n            <div class=\"input-group-prepend mx-2\">\n              <label class=\"input-group-text\" for=\"inputGroupSelect01\"\n                >Canal:\n              </label>\n            </div>\n            <select\n              class=\"form-select\"\n              aria-label=\"Default select example\"\n              name=\"channel1\"\n              id=\"selectChannel1\"\n            >\n              <option value=\"channel1\" selected>Channel 1</option>\n              <option value=\"channel2\">Channel 2</option>\n              <option value=\"channel3\">Channel 3</option>\n            </select>\n          </div>\n          <input type=\"submit\" value=\"Compartir Archivo\" class=\"btnUpload\" />\n        </div>\n      </form>\n    </div>\n    <div class=\"subContainer\">\n      <div class=\"card cardFiles\">\n        <div class=\"card-body\">\n          <ul class=\"list-group list-group-flush\" :key=\"actualizar\">\n            <li v-for=\"item in files\" :key=\"item.id\">\n              <a :href=\"'http://localhost:8080/file/' + item.fileName\">\n                {{ item.fileName }}\n              </a>\n              <div>{{ item.canal }}</div>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n  <button @click=\"prueba\">Get posts</button>\n</template>\n\n<script>\nimport { uuid } from \"vue-uuid\"; // Import uuid\nimport { crono } from \"vue-crono\";\nimport axios from \"axios\";\n\n//const form = document.querySelector(\"form\");\n\nexport default {\n  mixins: [crono],\n  name: \"HelloWorld\",\n  data() {\n    return {\n      posts: null,\n      files: [],\n      subs: [],\n      actualizar: 0,\n    };\n  },\n  props: {\n    msg: String,\n  },\n  methods: {\n    async subscribir() {\n      const selectAux = document.getElementById(\"selectChannel1\");\n      const headers = { \"Content-Type\": \"application/x-www-form-urlencoded\" };\n      var obj = {\"idUser\":this.getCookie(\"userId\"),\"channel\":selectAux.value}\n      this.posts = await axios\n        .post(\"http://localhost:8080/subscription\", obj, {headers})\n        .then((response) => {\n          console.log(response);\n        })\n        .catch((error) => {\n          this.errorMessage = error.message;\n          console.error(\"There was an error!\", error);\n        });\n    },\n    async prueba() {\n      const formData = new FormData(document.getElementById(\"formSend\"));\n      formData.append(\"idUser\", this.getCookie(\"userId\"));\n      const headers = { \"Content-Type\": \"multipart/form-data\" };\n      this.posts = await axios\n        .post(\"http://localhost:8080/upload\", formData, { headers })\n        .then((response) => {\n          var e = document.getElementById(\"selectChannel\");\n          var value = e.value;\n\n          var objectFile = {\n            canal: value,\n            fileName: response.data,\n          };\n          this.files.push(objectFile);\n          this.actualizar += 1;\n          console.log(this.files);\n        })\n        .catch((error) => {\n          this.errorMessage = error.message;\n          console.error(\"There was an error!\", error);\n        });\n    },\n    setCookie(cname, cvalue, exdays) {\n      const d = new Date();\n      d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);\n      let expires = \"expires=\" + d.toUTCString();\n      document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n    },\n    getCookie(cname) {\n      let name = cname + \"=\";\n      let decodedCookie = decodeURIComponent(document.cookie);\n      let ca = decodedCookie.split(\";\");\n      for (let i = 0; i < ca.length; i++) {\n        let c = ca[i];\n        while (c.charAt(0) == \" \") {\n          c = c.substring(1);\n        }\n        if (c.indexOf(name) == 0) {\n          return c.substring(name.length, c.length);\n        }\n      }\n      return \"\";\n    },\n\n    checkCookie(cname) {\n      let user = this.getCookie(cname);\n      if (user != \"\") {\n        return true;\n      } else {\n        //return false;\n        this.setCookie(\"userId\", uuid.v1(), 30);\n        return true;\n      }\n    },\n    async checkFiles() {\n      var sizeFile = true\n      if (this.files.length === 0) {\n        sizeFile = true\n      }else{\n        sizeFile = false\n      }\n      await axios\n        .post('http://localhost:8080/checkUpdate/'+this.getCookie(\"userId\"), sizeFile)\n        .then((response) => {\n          console.log(response);\n        })\n        .catch((error) => {\n          this.errorMessage = error.message;\n          console.error(\"There was an error!\", error);\n        });\n    },\n  },\n  cron: {\n    time: 10000,\n    method: \"checkFiles\",\n  },\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n.container {\n  display: flex;\n  flex-wrap: wrap;\n}\n.subContainer {\n  flex: 1 1 200px;\n  padding: 16px;\n}\n.cardFiles {\n  height: 100%;\n  background-color: ghostwhite;\n  padding: 16px;\n  border-radius: 15px;\n  border: solid 1px;\n  box-sizing: border-box;\n}\n.channels {\n  display: flex;\n  margin: 8px;\n  justify-content: center;\n  font-weight: bold;\n}\n.btnUpload {\n  margin: auto;\n  padding: 8px;\n  width: 90%;\n  background: #42b983;\n  color: white;\n  border-radius: 15px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}